(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7125],{2747:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>y});var l=s(5155),t=s(9586),r=s(285),d=s(6695),i=s(4165),n=s(2523),c=s(5057),m=s(6126),o=s(9409),h=s(381),x=s(4616);let u=(0,s(9946).A)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var p=s(9917),j=s(2525),g=s(2115);let v=[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"date",label:"Date"},{value:"boolean",label:"Boolean"},{value:"email",label:"Email"},{value:"phone",label:"Phone"},{value:"url",label:"URL"},{value:"text",label:"Text"},{value:"json",label:"JSON"}],N=e=>({string:"bg-blue-100 text-blue-800",number:"bg-green-100 text-green-800",date:"bg-purple-100 text-purple-800",boolean:"bg-orange-100 text-orange-800",email:"bg-pink-100 text-pink-800",phone:"bg-indigo-100 text-indigo-800",url:"bg-cyan-100 text-cyan-800",text:"bg-gray-100 text-gray-800",json:"bg-yellow-100 text-yellow-800"})[e]||"bg-gray-100 text-gray-800",b=e=>{let{internalHeaders:a,onAddHeader:s,onEditHeader:t,onDeleteHeader:b}=e,[f,y]=(0,g.useState)(""),[w,C]=(0,g.useState)(""),[k,A]=(0,g.useState)(""),[S,F]=(0,g.useState)(""),[H,_]=(0,g.useState)(null),[E,J]=(0,g.useState)(""),[R,D]=(0,g.useState)(""),[$,B]=(0,g.useState)(""),[L,O]=(0,g.useState)(""),[T,V]=(0,g.useState)(!1),[q,z]=(0,g.useState)(!1),G=e=>{_(e),J(e.label),D(e.value),B(e.aliases?e.aliases.join(", "):""),O(e.type),V(!0)},Z=async e=>{e._id&&await b(e._id)},M=f.trim()&&w.trim()&&S,P=E.trim()&&R.trim()&&L;return(0,l.jsxs)("div",{className:"w-full mx-auto space-y-8",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"hidden lg:flex items-center justify-center w-12 h-12 rounded-xl bg-primary/10",children:(0,l.jsx)(h.A,{className:"w-6 h-6 text-primary"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Internal Headers"}),(0,l.jsx)("p",{className:"text-muted-foreground text-lg",children:"Manage system fields available for data mapping"})]})]}),(0,l.jsxs)(r.$,{onClick:()=>z(!0),className:"px-6 hover:bg-sky-700",children:[(0,l.jsx)(x.A,{className:"h-4 w-4"}),"Add Header"]})]}),(0,l.jsx)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:(0,l.jsxs)("span",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500"}),a.length," headers configured"]})})]}),(0,l.jsxs)(d.Zp,{className:"border-0 shadow-md",children:[(0,l.jsxs)(d.aR,{className:"border-b bg-muted/20 rounded-t-lg",children:[(0,l.jsxs)(d.ZB,{className:"text-xl flex items-center gap-2",children:[(0,l.jsx)(u,{className:"w-5 h-5"}),"Current Headers"]}),(0,l.jsx)(d.BT,{children:"Existing internal headers that can be mapped to external data sources"})]}),(0,l.jsx)(d.Wu,{className:"p-6",children:0===a.length?(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,l.jsx)("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:(0,l.jsx)(u,{className:"w-8 h-8 text-muted-foreground"})}),(0,l.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No headers configured"}),(0,l.jsx)("p",{className:"text-muted-foreground mb-4 max-w-md",children:'Get started by adding your first internal header. Click the "Add Header" button above to begin.'})]}):(0,l.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(e=>(0,l.jsx)(d.Zp,{className:"group hover:shadow-md transition-all duration-200 border-border/50",children:(0,l.jsx)(d.Wu,{className:"p-4",children:(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h4",{className:"font-semibold text-sm leading-tight",children:e.label}),(0,l.jsx)(m.E,{className:"text-xs ".concat(N(e.type)),children:e.type})]}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground font-mono bg-muted px-2 py-1 rounded",children:e.value})]}),e.aliases&&e.aliases.length>0&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Aliases:"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-1",children:e.aliases.map((e,a)=>(0,l.jsx)(m.E,{variant:"secondary",className:"text-xs",children:e},a))})]}),(0,l.jsxs)("div",{className:"flex justify-end gap-2 pt-2 border-t",children:[(0,l.jsxs)(r.$,{variant:"outline",size:"sm",onClick:()=>G(e),className:"h-8 px-3",children:[(0,l.jsx)(p.A,{className:"w-3 h-3"}),(0,l.jsxs)("span",{className:"sr-only",children:["Edit ",e.label]})]}),(0,l.jsxs)(r.$,{variant:"outline",size:"sm",onClick:()=>Z(e),className:"h-8 px-3 text-destructive hover:text-destructive hover:bg-destructive/10",children:[(0,l.jsx)(j.A,{className:"w-3 h-3"}),(0,l.jsxs)("span",{className:"sr-only",children:["Delete ",e.label]})]})]})]})})},e._id||e.value))})})]}),(0,l.jsx)(i.lG,{open:q,onOpenChange:z,children:(0,l.jsxs)(i.Cf,{className:"sm:max-w-[500px]",children:[(0,l.jsxs)(i.c7,{children:[(0,l.jsx)(i.L3,{className:"text-xl",children:"Add New Header"}),(0,l.jsx)(i.rr,{className:"text-base",children:"Create a new internal header field for data mapping."})]}),(0,l.jsxs)("div",{className:"space-y-6 py-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(c.J,{htmlFor:"new-header-label",className:"text-sm font-medium",children:"Display Label"}),(0,l.jsx)(n.p,{id:"new-header-label",placeholder:"e.g., Customer Name",value:f,onChange:e=>y(e.target.value),className:"h-11"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Human-readable name shown in the interface"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(c.J,{htmlFor:"new-header-value",className:"text-sm font-medium",children:"System Value"}),(0,l.jsx)(n.p,{id:"new-header-value",placeholder:"e.g., customer_name",value:w,onChange:e=>C(e.target.value),className:"h-11 font-mono"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Technical identifier used internally"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(c.J,{htmlFor:"new-header-type",className:"text-sm font-medium",children:"Data Type"}),(0,l.jsxs)(o.l6,{value:S,onValueChange:F,children:[(0,l.jsx)(o.bq,{className:"h-11",children:(0,l.jsx)(o.yv,{placeholder:"Select data type"})}),(0,l.jsx)(o.gC,{children:v.map(e=>(0,l.jsx)(o.eb,{value:e.value,children:e.label},e.value))})]}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Choose the data type that best represents this field"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)(c.J,{htmlFor:"new-header-aliases",className:"text-sm font-medium",children:["Aliases ",(0,l.jsx)("span",{className:"text-muted-foreground font-normal",children:"(optional)"})]}),(0,l.jsx)(n.p,{id:"new-header-aliases",placeholder:"e.g., Client Name, Account Holder, Full Name",value:k,onChange:e=>A(e.target.value),className:"h-11"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Alternative names separated by commas. Helpful for automatic field matching."})]})]}),(0,l.jsxs)(i.Es,{className:"gap-3",children:[(0,l.jsx)(r.$,{variant:"outline",onClick:()=>z(!1),className:"min-w-[100px]",children:"Cancel"}),(0,l.jsxs)(r.$,{onClick:()=>{if(f.trim()&&w.trim()&&S){let e=k.split(",").map(e=>e.trim()).filter(Boolean);s({label:f.trim(),value:w.trim(),aliases:e.length>0?e:void 0,type:S}),y(""),C(""),A(""),F(""),z(!1)}},disabled:!M,className:"min-w-[120px] hover:bg-sky-700",children:[(0,l.jsx)(x.A,{className:"h-4 w-4"}),"Add Header"]})]})]})}),(0,l.jsx)(i.lG,{open:T,onOpenChange:V,children:(0,l.jsxs)(i.Cf,{className:"sm:max-w-[500px]",children:[(0,l.jsxs)(i.c7,{children:[(0,l.jsx)(i.L3,{className:"text-xl",children:"Edit Header"}),(0,l.jsx)(i.rr,{className:"text-base",children:"Update the header information. Changes will be applied immediately."})]}),(0,l.jsxs)("div",{className:"space-y-6 py-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(c.J,{htmlFor:"edit-label",className:"text-sm font-medium",children:"Display Label"}),(0,l.jsx)(n.p,{id:"edit-label",value:E,onChange:e=>J(e.target.value),className:"h-11"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(c.J,{htmlFor:"edit-value",className:"text-sm font-medium",children:"System Value"}),(0,l.jsx)(n.p,{id:"edit-value",value:R,onChange:e=>D(e.target.value),className:"h-11 font-mono"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(c.J,{htmlFor:"edit-type",className:"text-sm font-medium",children:"Data Type"}),(0,l.jsxs)(o.l6,{value:L,onValueChange:O,children:[(0,l.jsx)(o.bq,{className:"h-11",children:(0,l.jsx)(o.yv,{placeholder:"Select data type"})}),(0,l.jsx)(o.gC,{children:v.map(e=>(0,l.jsx)(o.eb,{value:e.value,children:e.label},e.value))})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)(c.J,{htmlFor:"edit-aliases",className:"text-sm font-medium",children:["Aliases ",(0,l.jsx)("span",{className:"text-muted-foreground font-normal",children:"(optional)"})]}),(0,l.jsx)(n.p,{id:"edit-aliases",placeholder:"comma-separated values",value:$,onChange:e=>B(e.target.value),className:"h-11"})]})]}),(0,l.jsxs)(i.Es,{className:"gap-3",children:[(0,l.jsx)(r.$,{variant:"outline",onClick:()=>V(!1),className:"min-w-[100px]",children:"Cancel"}),(0,l.jsx)(r.$,{onClick:()=>{if(H&&H._id&&E.trim()&&R.trim()&&L){let e=$.split(",").map(e=>e.trim()).filter(Boolean);t(H._id,{label:E.trim(),value:R.trim(),aliases:e.length>0?e:void 0,type:L}),V(!1),_(null)}},disabled:!P,className:"min-w-[120px] hover:bg-sky-700",children:"Save Changes"})]})]})})]})};var f=s(6671);let y=()=>{let[e,a]=(0,g.useState)([]);(0,g.useEffect)(()=>{(async()=>{try{let e=await t.A.get("/headers");console.log("Fetched headers:",e.data.headers),a(e.data.headers||[])}catch(e){console.error("Failed to fetch headers:",e),f.oR.error("Failed to fetch headers")}})()},[]);let s=async e=>{try{let s=await t.A.post("/create/header",e);if(s.data){f.oR.success("Header added successfully.");let e=s.data;a(a=>[...a,e])}}catch(a){var s,l;console.error("Failed to add header:",a);let e=(null==(l=a.response)||null==(s=l.data)?void 0:s.detail)||"Failed to add header";f.oR.error(e)}},r=async(e,s)=>{try{let l=await t.A.put("update/header/".concat(e),s);if(l.data.success){let s=l.data.header;a(a=>a.map(a=>a._id===e?s:a)),f.oR.success("Header updated successfully.")}}catch(a){var l,r;console.error("Failed to edit header:",a);let e=(null==(r=a.response)||null==(l=r.data)?void 0:l.detail)||"Failed to update header";f.oR.error(e)}},d=async e=>{try{(await t.A.delete("/delete/header/".concat(e),{withCredentials:!0})).data.success&&(f.oR.success("Header deleted successfully."),a(a=>a.filter(a=>a._id!==e)))}catch(a){var s,l;console.error("Failed to delete header:",a);let e=(null==(l=a.response)||null==(s=l.data)?void 0:s.detail)||"Failed to delete header";f.oR.error(e)}};return(0,l.jsx)("div",{className:"min-h-screen bg-background",children:(0,l.jsx)("div",{className:"px-4",children:(0,l.jsx)(b,{internalHeaders:e,onAddHeader:s,onEditHeader:r,onDeleteHeader:d})})})}},5015:(e,a,s)=>{Promise.resolve().then(s.bind(s,2747))}},e=>{var a=a=>e(e.s=a);e.O(0,[4277,1290,5152,3656,6671,2782,3209,8441,1684,7358],()=>a(5015)),_N_E=e.O()}]);